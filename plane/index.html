<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plane Game</title>

  <style>
    * {
      padding: 0;
      margin: 0;
      user-select: none;
    }

    .container {
      display: flex;
    }

    canvas {
      border: 1px solid #000;
    }

    .control-board {
      padding: 10px;
    }
  </style>

  <!-- 游戏文件 -->
  <script src="game/utils.js"></script>
  <script src="game/game.js"></script>
  <script src="game/texture.js"></script>
  <script src="game/animation.js"></script>
  <!-- 场景 -->
  <script src="scene/scene.js"></script>
  <script src="scene/player.js"></script>
  <script src="scene/main/bullet.js"></script>
  <script src="scene/main/enemy.js"></script>
  <script src="scene/main/plane.js"></script>
  <script src="scene/main/main.js"></script>
  <!-- 开始和结束场景 -->
  <script src="scene/end/end.js"></script>
  <script src="scene/title/title.js"></script>
  <!-- 配置文件 -->
  <script src="config.js"></script>
</head>
<body>
  <div class="container">
    <canvas id="id-canvas" width="800" height="1000"></canvas>
  
    <div class="control-board"></div>
  
  <!-- 入口 -->
  <script src="main.js"></script>
  <script>
  const __init_config = function(type, sel) {
    const renderText = (id, { label, value, step = 1, max = 100 }) => {
      // log(id)
      const template = `
        <div class="item">
          <label for="">
            ${label}
            <input
              type="range"
              data-id="${id}"
              value="${value}"
              step="${step}"
              max="${max}"
            />
            <span>${value}</span>
          </label>
        </div>
      `
      return template
    }

    const render = function(sel) {
      const html = Object.keys(config)
        .map(id => renderText(id, config[id]))
        .reduce((pre, next) => pre + next, '')

      e(sel).innerHTML = html
    }

    const bindEvents = (type, sels) => {
      document.querySelectorAll(sels)
        .forEach(elem => {
          elem.addEventListener(type, e => {
            const elem = e.target
            const id = elem.dataset.id
            const value = elem.value

            eval(`config['${id}'].value = ${value}`)

            elem.nextElementSibling.innerText = value
          })
        })
    }
    
    render('.control-board')

    bindEvents('input', '.control-board input')
  }

  __init_config()
  </script>
</body>
</html>